### Сотрудники

- Задача нахождения границ интервалов в Регистре Сведений
    - Каркасная
        - РС `СтатусФизЛица`
            - Измерение `ФизЛицо ` Тип `СправочникСсылка.ФизическиеЛица`
            - Ресурс `Статус`  Тип `ПеречислениеСсылка.СтатусыФизЛиц`
    - Возможные статусы (состояния)
        - Работает
        - В отпуске
        - На больничном
        - Уволен
 

##### Реализация

- [Все поля](https://github.com/alex-dev-2020/Employees/commit/b960abab2affd2f71bc78840e2b0cdedf7e4e81a) из Физической Таблицы
    - Упорядочиваем по периоду 
- [+ 2-й Запрос в Пакете](https://github.com/alex-dev-2020/Employees/commit/ac072c7a3e673e0be1f5cc5d3b8b8ae55be0b584) 
    - Временная Таблица *(для визуального контроля, дальше не используется)*
        - `+`  Поле `АВТОНОМЕРЗАПИСИ() КАК НомерСтроки`
- [+ 3-й Запрос в Пакете](https://github.com/alex-dev-2020/Employees/commit/67dc980321f724771728f670c6a6ced5e1330e85) 
    - добавляем Саму Таблицу, переименовываем в `ВТ_ВсеЗаписи_Индекс_Копия` 
        - Соединяем Таблицы по Номеру Строки:
            - Правую Таблицу сдвигаем на строку вниз (Номер Строки + 1) 
        - Условия: 
            - записи Должны  отличаться только Датой) 
            - Сотрудник <> Сотрудник ИЛИ  Статус <> Статус
        - Упорядочиваем по Периоду 
 - [+ 4 -й Запрос в Пакете](https://github.com/alex-dev-2020/Employees/commit/ca24627be15ef6f300a0035f49b8eb661ad6bb39) 
    - помещаем Результат 3-го Запроса  в `ВТ_Интервалы`
    - ДВАЖДЫ берем таблицу  `ВТ_Интервалы`: 
        - Соединяем ВНУТРЕННИМ Соединением по:
            - Физлицу
            - Период Таблица 1 **МЕНЬШЕ или РАВЕН** Период Таблица 2 
        - Поля:
            - Физ Лицо
            - Статус → **Состояние**
            - Период → **ПериодНачало** 
                - `ВЫРАЗИТЬ(ВТ_ВсеЗаписи_Индекс.Период КАК ДАТА)` - *чтобы Время появилось*
            - ВЫБОР:
                - Периоды НЕ Совпали: => это ПРАВАЯ Граница Интервала => берем период из ВТОРОЙ Таблицы → **ПериодОкончание**
                    - отнимаем Секунду `ДОБАВИТЬКДАТЕ (<. . . >, СЕКУНДА  - 1)` → *провалимся в предыдущие СУТКИ*    
        - Группируем по: 
            - Период Таблица 1  `МИНИМУМ`
- [Консолька](https://github.com/alex-dev-2020/Employees/commit/b0f03aed28ff0e4ff19936a8134ebab7243595fc)


  


 
